{"version":3,"file":"model.js","sourceRoot":"","sources":["../../../../src/project/versioned/v0_3_0/model.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;;;;;;;;;;AAEtC,yDAAqD;AACrD,qDAAkG;AAClG,sCASmB;AAGnB,MAAa,gBAAgB;CAoB5B;AAjBC;IAFC,IAAA,wBAAM,EAAC,OAAO,CAAC;IACf,IAAA,0BAAQ,GAAE;;qDACS;AAGpB;IAFC,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,iBAAQ,CAAC;8BACb,iBAAQ;gDAAC;AAUjB;IATC,IAAA,yBAAO,GAAE;IACT,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,4CAAmC,EAAE;QAC/C,aAAa,EAAE;YACb,QAAQ,EAAE,MAAM;YAChB,QAAQ,EAAE,CAAC,EAAC,KAAK,EAAE,6CAAoC,EAAE,IAAI,EAAE,mBAAmB,EAAC,CAAC;SACrF;QACD,yBAAyB,EAAE,IAAI;KAChC,CAAC;;qDACgE;AAGlE;IAFC,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,uCAA8B,CAAC;8BAClC,uCAA8B;iDAAC;AAnB1C,4CAoBC;AAED,MAAa,yBACX,SAAQ,kCAA2C;IA4BnD,IAAI,UAAU;QACZ,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,WAAW,GAAG,IAAA,gCAAY,EAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YACxD,IAAA,8BAAY,EAAC,IAAI,CAAC,WAAW,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;SACnD;QACD,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;CACF;AA/BC;IADC,IAAA,wBAAM,EAAC,OAAO,CAAC;;8DACI;AAEpB;IADC,IAAA,0BAAQ,GAAE;;uDACE;AAEb;IADC,IAAA,0BAAQ,GAAE;;0DACK;AAIhB;IAHC,IAAA,0BAAQ,GAAE;IACV,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,6BAAoB,CAAC;8BACxB,6BAAoB;0DAAC;AAG9B;IAFC,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,iBAAQ,CAAC;8BACb,iBAAQ;yDAAC;AAUjB;IATC,IAAA,yBAAO,GAAE;IACT,IAAA,gCAAc,GAAE;IAChB,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,4CAAmC,EAAE;QAC/C,aAAa,EAAE;YACb,QAAQ,EAAE,MAAM;YAChB,QAAQ,EAAE,CAAC,EAAC,KAAK,EAAE,6CAAoC,EAAE,IAAI,EAAE,mBAAmB,EAAC,CAAC;SACrF;QACD,yBAAyB,EAAE,IAAI;KAChC,CAAC;;8DACgE;AA1BpE,8DAoCC","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {plainToClass, Type} from 'class-transformer';\nimport {Equals, IsArray, IsObject, IsString, ValidateNested, validateSync} from 'class-validator';\nimport {\n  FileType,\n  ProjectNetworkV0_2_0,\n  ProjectNetworkDeploymentV0_2_0,\n  CustomDatasourceV0_2_0,\n  RuntimeDataSourceV0_2_0,\n  ProjectManifestV0_2_0Impl,\n  SubstrateCustomDataSourceV0_2_0Impl,\n  SubstrateRuntimeDataSourceV0_2_0Impl,\n} from '../v0_2_0';\nimport {SubstrateProjectManifestV0_3_0} from './types';\n\nexport class DeploymentV0_3_0 {\n  @Equals('0.3.0')\n  @IsString()\n  specVersion: string;\n  @ValidateNested()\n  @Type(() => FileType)\n  schema: FileType;\n  @IsArray()\n  @ValidateNested()\n  @Type(() => SubstrateCustomDataSourceV0_2_0Impl, {\n    discriminator: {\n      property: 'kind',\n      subTypes: [{value: SubstrateRuntimeDataSourceV0_2_0Impl, name: 'substrate/Runtime'}],\n    },\n    keepDiscriminatorProperty: true,\n  })\n  dataSources: (RuntimeDataSourceV0_2_0 | CustomDatasourceV0_2_0)[];\n  @ValidateNested()\n  @Type(() => ProjectNetworkDeploymentV0_2_0)\n  network: ProjectNetworkDeploymentV0_2_0;\n}\n\nexport class ProjectManifestV0_3_0Impl\n  extends ProjectManifestV0_2_0Impl<DeploymentV0_3_0>\n  implements SubstrateProjectManifestV0_3_0\n{\n  @Equals('0.3.0')\n  specVersion: string;\n  @IsString()\n  name: string;\n  @IsString()\n  version: string;\n  @IsObject()\n  @ValidateNested()\n  @Type(() => ProjectNetworkV0_2_0)\n  network: ProjectNetworkV0_2_0;\n  @ValidateNested()\n  @Type(() => FileType)\n  schema: FileType;\n  @IsArray()\n  @ValidateNested()\n  @Type(() => SubstrateCustomDataSourceV0_2_0Impl, {\n    discriminator: {\n      property: 'kind',\n      subTypes: [{value: SubstrateRuntimeDataSourceV0_2_0Impl, name: 'substrate/Runtime'}],\n    },\n    keepDiscriminatorProperty: true,\n  })\n  dataSources: (RuntimeDataSourceV0_2_0 | CustomDatasourceV0_2_0)[];\n  protected _deployment: DeploymentV0_3_0;\n\n  get deployment(): DeploymentV0_3_0 {\n    if (!this._deployment) {\n      this._deployment = plainToClass(DeploymentV0_3_0, this);\n      validateSync(this._deployment, {whitelist: true});\n    }\n    return this._deployment;\n  }\n}\n"]}