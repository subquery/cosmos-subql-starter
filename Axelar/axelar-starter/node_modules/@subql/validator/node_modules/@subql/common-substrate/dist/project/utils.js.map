{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/project/utils.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;AAGtC,wCAQsB;AACtB,mCAA2B;AAE3B,SAAgB,uBAAuB,CACrC,EAAiE;IAEjE,OAAO,EAAE,CAAC,eAAe,KAAK,4BAAoB,CAAC,KAAK,CAAC;AAC3D,CAAC;AAJD,0DAIC;AAED,SAAgB,uBAAuB,CACrC,EAAiE;IAEjE,OAAO,EAAE,CAAC,eAAe,KAAK,4BAAoB,CAAC,KAAK,CAAC;AAC3D,CAAC;AAJD,0DAIC;AAED,SAAgB,sBAAsB,CACpC,EAAiE;IAEjE,OAAO,EAAE,CAAC,eAAe,KAAK,4BAAoB,CAAC,IAAI,CAAC;AAC1D,CAAC;AAJD,wDAIC;AAED,SAAgB,UAAU,CACxB,EAAuB;IAEvB,OAAO,EAAE,CAAC,IAAI,KAAK,+BAAuB,CAAC,OAAO,IAAI,CAAC,CAAE,EAA2C,CAAC,SAAS,CAAC;AACjH,CAAC;AAJD,gCAIC;AAED,SAAgB,WAAW,CAAC,EAAuB;IACjD,OAAO,EAAE,CAAC,IAAI,KAAK,+BAAuB,CAAC,OAAO,CAAC;AACrD,CAAC;AAFD,kCAEC;AAED,SAAgB,oBAAoB,CAClC,aAAkB,EAClB,WAAmB;IAEnB,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAA,YAAG,EAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AACtG,CAAC;AALD,oDAKC","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {CustomDatasourceTemplate, RuntimeDatasourceTemplate} from '@subql/common-substrate/project/versioned';\nimport {\n  SecondLayerHandlerProcessor,\n  SubstrateCustomDatasource,\n  SubstrateDatasource,\n  SubstrateDatasourceKind,\n  SubstrateHandlerKind,\n  SubstrateNetworkFilter,\n  SubstrateRuntimeDatasource,\n} from '@subql/types';\nimport {gte} from 'semver';\n\nexport function isBlockHandlerProcessor<T extends SubstrateNetworkFilter, E>(\n  hp: SecondLayerHandlerProcessor<SubstrateHandlerKind, T, unknown>\n): hp is SecondLayerHandlerProcessor<SubstrateHandlerKind.Block, T, E> {\n  return hp.baseHandlerKind === SubstrateHandlerKind.Block;\n}\n\nexport function isEventHandlerProcessor<T extends SubstrateNetworkFilter, E>(\n  hp: SecondLayerHandlerProcessor<SubstrateHandlerKind, T, unknown>\n): hp is SecondLayerHandlerProcessor<SubstrateHandlerKind.Event, T, E> {\n  return hp.baseHandlerKind === SubstrateHandlerKind.Event;\n}\n\nexport function isCallHandlerProcessor<T extends SubstrateNetworkFilter, E>(\n  hp: SecondLayerHandlerProcessor<SubstrateHandlerKind, T, unknown>\n): hp is SecondLayerHandlerProcessor<SubstrateHandlerKind.Call, T, E> {\n  return hp.baseHandlerKind === SubstrateHandlerKind.Call;\n}\n\nexport function isCustomDs<F extends SubstrateNetworkFilter>(\n  ds: SubstrateDatasource\n): ds is SubstrateCustomDatasource<string, F> {\n  return ds.kind !== SubstrateDatasourceKind.Runtime && !!(ds as SubstrateCustomDatasource<string, F>).processor;\n}\n\nexport function isRuntimeDs(ds: SubstrateDatasource): ds is SubstrateRuntimeDatasource {\n  return ds.kind === SubstrateDatasourceKind.Runtime;\n}\n\nexport function isSubstrateTemplates(\n  templatesData: any,\n  specVersion: string\n): templatesData is (RuntimeDatasourceTemplate | CustomDatasourceTemplate)[] {\n  return (isRuntimeDs(templatesData[0]) || isCustomDs(templatesData[0])) && gte(specVersion, '0.2.1');\n}\n"]}