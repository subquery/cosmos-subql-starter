{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/project/utils.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;AAGtC,oDAO4B;AAC5B,mCAA2B;AAE3B,SAAgB,eAAe,CAAC,EAAwB;IACtD,OAAO,EAAE,CAAC,IAAI,KAAK,sCAAwB,CAAC,OAAO,IAAI,CAAC,CAAE,EAAyC,CAAC,SAAS,CAAC;AAChH,CAAC;AAFD,0CAEC;AAED,SAAgB,gBAAgB,CAAC,EAAwB;IACvD,OAAO,EAAE,CAAC,IAAI,KAAK,sCAAwB,CAAC,OAAO,CAAC;AACtD,CAAC;AAFD,4CAEC;AAED,SAAgB,uBAAuB,CACrC,EAA6E;IAE7E,OAAO,EAAE,CAAC,eAAe,KAAK,mCAAqB,CAAC,KAAK,CAAC;AAC5D,CAAC;AAJD,0DAIC;AAED,SAAgB,6BAA6B,CAC3C,EAA6E;IAE7E,OAAO,EAAE,CAAC,eAAe,KAAK,mCAAqB,CAAC,WAAW,CAAC;AAClE,CAAC;AAJD,sEAIC;AAED,SAAgB,yBAAyB,CACvC,EAA6E;IAE7E,OAAO,EAAE,CAAC,eAAe,KAAK,mCAAqB,CAAC,OAAO,CAAC;AAC9D,CAAC;AAJD,8DAIC;AAED,SAAgB,uBAAuB,CACrC,EAA6E;IAE7E,OAAO,EAAE,CAAC,eAAe,KAAK,mCAAqB,CAAC,KAAK,CAAC;AAC5D,CAAC;AAJD,0DAIC;AAED,SAAgB,gBAAgB,CAC9B,aAAkB,EAClB,WAAmB;IAEnB,OAAO,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,eAAe,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAA,YAAG,EAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAChH,CAAC;AALD,4CAKC","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {CustomDatasourceTemplate, RuntimeDatasourceTemplate} from '@subql/common-terra/project/versioned';\nimport {\n  SecondLayerTerraHandlerProcessor,\n  SubqlTerraCustomDatasource,\n  SubqlTerraDatasource,\n  SubqlTerraDatasourceKind,\n  SubqlTerraHandlerKind,\n  SubqlTerraRuntimeDatasource,\n} from '@subql/types-terra';\nimport {gte} from 'semver';\n\nexport function isCustomTerraDs(ds: SubqlTerraDatasource): ds is SubqlTerraCustomDatasource<string> {\n  return ds.kind !== SubqlTerraDatasourceKind.Runtime && !!(ds as SubqlTerraCustomDatasource<string>).processor;\n}\n\nexport function isRuntimeTerraDs(ds: SubqlTerraDatasource): ds is SubqlTerraRuntimeDatasource {\n  return ds.kind === SubqlTerraDatasourceKind.Runtime;\n}\n\nexport function isBlockHandlerProcessor<E>(\n  hp: SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind, unknown, unknown>\n): hp is SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind.Block, unknown, E> {\n  return hp.baseHandlerKind === SubqlTerraHandlerKind.Block;\n}\n\nexport function isTransactionHandlerProcessor<E>(\n  hp: SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind, unknown, unknown>\n): hp is SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind.Transaction, unknown, E> {\n  return hp.baseHandlerKind === SubqlTerraHandlerKind.Transaction;\n}\n\nexport function isMessageHandlerProcessor<E>(\n  hp: SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind, unknown, unknown>\n): hp is SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind.Message, unknown, E> {\n  return hp.baseHandlerKind === SubqlTerraHandlerKind.Message;\n}\n\nexport function isEventHandlerProcessor<E>(\n  hp: SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind, unknown, unknown>\n): hp is SecondLayerTerraHandlerProcessor<SubqlTerraHandlerKind.Event, unknown, E> {\n  return hp.baseHandlerKind === SubqlTerraHandlerKind.Event;\n}\n\nexport function isTerraTemplates(\n  templatesData: any,\n  specVersion: string\n): templatesData is (RuntimeDatasourceTemplate | CustomDatasourceTemplate)[] {\n  return (isRuntimeTerraDs(templatesData[0]) || isCustomTerraDs(templatesData[0])) && gte(specVersion, '1.0.0');\n}\n"]}