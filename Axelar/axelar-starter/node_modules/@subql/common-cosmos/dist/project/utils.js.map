{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/project/utils.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;AAEtC,sDAO6B;AAC7B,mCAA2B;AAG3B,SAAgB,gBAAgB,CAAC,EAAyB;IACxD,OAAO,EAAE,CAAC,IAAI,KAAK,wCAAyB,CAAC,OAAO,IAAI,CAAC,CAAE,EAA0C,CAAC,SAAS,CAAC;AAClH,CAAC;AAFD,4CAEC;AAED,SAAgB,iBAAiB,CAAC,EAAyB;IACzD,OAAO,EAAE,CAAC,IAAI,KAAK,wCAAyB,CAAC,OAAO,CAAC;AACvD,CAAC;AAFD,8CAEC;AAED,SAAgB,uBAAuB,CACrC,EAAyE;IAEzE,OAAO,EAAE,CAAC,eAAe,KAAK,qCAAsB,CAAC,KAAK,CAAC;AAC7D,CAAC;AAJD,0DAIC;AAED,SAAgB,6BAA6B,CAC3C,EAAyE;IAEzE,OAAO,EAAE,CAAC,eAAe,KAAK,qCAAsB,CAAC,WAAW,CAAC;AACnE,CAAC;AAJD,sEAIC;AAED,SAAgB,yBAAyB,CACvC,EAAyE;IAEzE,OAAO,EAAE,CAAC,eAAe,KAAK,qCAAsB,CAAC,OAAO,CAAC;AAC/D,CAAC;AAJD,8DAIC;AAED,SAAgB,uBAAuB,CACrC,EAAyE;IAEzE,OAAO,EAAE,CAAC,eAAe,KAAK,qCAAsB,CAAC,KAAK,CAAC;AAC7D,CAAC;AAJD,0DAIC;AAED,SAAgB,iBAAiB,CAC/B,aAAkB,EAClB,WAAmB;IAEnB,OAAO,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAA,YAAG,EAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAClH,CAAC;AALD,8CAKC","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  SecondLayerHandlerProcessor,\n  SubqlCosmosCustomDatasource,\n  SubqlCosmosDatasource,\n  SubqlCosmosDatasourceKind,\n  SubqlCosmosHandlerKind,\n  SubqlCosmosRuntimeDatasource,\n} from '@subql/types-cosmos';\nimport {gte} from 'semver';\nimport {CustomDatasourceTemplate, RuntimeDatasourceTemplate} from './versioned';\n\nexport function isCustomCosmosDs(ds: SubqlCosmosDatasource): ds is SubqlCosmosCustomDatasource<string> {\n  return ds.kind !== SubqlCosmosDatasourceKind.Runtime && !!(ds as SubqlCosmosCustomDatasource<string>).processor;\n}\n\nexport function isRuntimeCosmosDs(ds: SubqlCosmosDatasource): ds is SubqlCosmosRuntimeDatasource {\n  return ds.kind === SubqlCosmosDatasourceKind.Runtime;\n}\n\nexport function isBlockHandlerProcessor<E>(\n  hp: SecondLayerHandlerProcessor<SubqlCosmosHandlerKind, unknown, unknown>\n): hp is SecondLayerHandlerProcessor<SubqlCosmosHandlerKind.Block, unknown, E> {\n  return hp.baseHandlerKind === SubqlCosmosHandlerKind.Block;\n}\n\nexport function isTransactionHandlerProcessor<E>(\n  hp: SecondLayerHandlerProcessor<SubqlCosmosHandlerKind, unknown, unknown>\n): hp is SecondLayerHandlerProcessor<SubqlCosmosHandlerKind.Transaction, unknown, E> {\n  return hp.baseHandlerKind === SubqlCosmosHandlerKind.Transaction;\n}\n\nexport function isMessageHandlerProcessor<E>(\n  hp: SecondLayerHandlerProcessor<SubqlCosmosHandlerKind, unknown, unknown>\n): hp is SecondLayerHandlerProcessor<SubqlCosmosHandlerKind.Message, unknown, E> {\n  return hp.baseHandlerKind === SubqlCosmosHandlerKind.Message;\n}\n\nexport function isEventHandlerProcessor<E>(\n  hp: SecondLayerHandlerProcessor<SubqlCosmosHandlerKind, unknown, unknown>\n): hp is SecondLayerHandlerProcessor<SubqlCosmosHandlerKind.Event, unknown, E> {\n  return hp.baseHandlerKind === SubqlCosmosHandlerKind.Event;\n}\n\nexport function isCosmosTemplates(\n  templatesData: any,\n  specVersion: string\n): templatesData is (RuntimeDatasourceTemplate | CustomDatasourceTemplate)[] {\n  return (isRuntimeCosmosDs(templatesData[0]) || isCustomCosmosDs(templatesData[0])) && gte(specVersion, '0.2.1');\n}\n"]}